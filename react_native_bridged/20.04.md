<p>This documentation applies to the version 20.4.</p>
<div class="callout callout--info">
  <p class="callout__title">
    <strong><span class="wysiwyg-font-size-large">React Native Bridge is a successor to the React Native SDK</span></strong>
  </p>
  <p>
    The React Native SDK, which was developed earlier, will soon be end-of-life
    and will no longer be maintained. Please use this (bridge) SDK for a more
    complete and more tested version.
  </p>
</div>
<p>
  <span style="font-weight:400">This is the Countly SDK for React Native applications. It features bridging, meaning it includes all the functionalities that Android and iOS SDKs provide rather than having those functionalities as React Native code.</span>
</p>
<h1>Creating a new application</h1>
<p>
  <span style="font-weight:400">In order to use the React Native SDK, please use the following commands to create a new React Native application.</span>
</p>
<pre><code class="shell">npm install -g react-native-cli     # Install React Native
react-native init AwesomeProject    # Create a new project

cd AwesomeProject                   # Go to that directory
react-native run-android # OR       # Run the android project
react-native run-ios                # Run the iOS project

# New terminal
adb reverse tcp:8081 tcp:8081       # Link Android port
npm start                           # Run the build server</code></pre>
<h1>Installing the Countly SDK</h1>
<p>
  <span style="font-weight:400">Run the following snippet in the root directory of your React Native project to install the npm dependencies and link&nbsp;</span><strong>native libraries</strong><span style="font-weight:400">.</span>
</p>
<pre># Include the Countly Class in the file that you want to use.<br>npm install --save https://github.com/Countly/countly-sdk-react-native-bridge.git<br># OR <br>npm install --save countly-sdk-react-native-bridge@19.8.5<br><br># Linking the library to your app<br><br># react-native &lt; 0.60. For both Android and iOS<br>react-native link countly-sdk-react-native-bridge<br>cd node_modules/countly-sdk-react-native-bridge/ios/<br>pod install <br>cd ../../../<br><br># react-native &gt;= 0.60 for iOS (Android will autolink)<br>cd ios <br>pod install<br>cd ..</pre>
<h1>Implementation</h1>
<p>
  <span style="font-weight:400">We will need to call two methods (init and start) in order to set up our SDK. You may also like to specify other parameters at this step (i.e. whether logging will be used). These methods should only be called once during the app's lifecycle and should be done as early as possible. Your main App component's <code>componentDidMount</code>method may be a good place.&nbsp;</span>
</p>
<p>
  <span style="font-weight:400">See the serverURL value in the code snippet below. If you are using the Countly Enterprise Edition trial servers, use <a href="https://try.count.ly" target="_self">https://try.count.ly</a></span><span style="font-weight:400">,</span><span style="font-weight:400">&nbsp;</span><a href="https://us-try.count.ly/"><span style="font-weight:400">https://us-try.count.ly</span></a><span style="font-weight:400">&nbsp;or&nbsp;</span><a href="https://asia-try.count.ly./"><span style="font-weight:400">https://asia-try.count.ly.</span></a><span style="font-weight:400">&nbsp;In other words, use the domain from which you are accessing your trial dashboard.</span>
</p>
<p>
  <span style="font-weight:400">If you use both Community Edition and Enterprise Edition, use your own domain name or IP address, such as </span><em><span style="font-weight:400">https://example.com</span></em><span style="font-weight:400">&nbsp;or&nbsp;</span><em><span style="font-weight:400">https://IP</span></em><span style="font-weight:400">&nbsp;(if SSL is setup).</span>
</p>
<pre><code class="javascript">import Countly from 'countly-sdk-react-native-bridge';
<br>// initialize
// modify serverURL to your own.  
var serverURL = "https://mycompany.count.ly";
var appKey = "f0b2ac6919f718a13821575db28c0e2971e05ec5";
var deviceId = null; // or use some string that identifies current app user
Countly.init(serverURL, appKey, deviceId);

// configure other Countly parameters if needed
Countly.enableParameterTamperingProtection("salt");<br>Countly.enableLogging();
...<br><br>// start session tracking<br>Countly.start(); <br></code></pre>
<p>
  <span style="font-weight:400">After init and start have been called once, you may use the commands in the rest of this document to send additional data and metrics to your server.&nbsp;</span>
</p>
<h1>User Location</h1>
<p>
  <span>Countly allows you to send GeoLocation-based push notifications to your users. By default, the Countly Server uses the GeoIP database to deduce a user's location. However, if your app has a better way of detecting location, you may send this information to the Countly Server by using the&nbsp;<code>setLocationInit</code>&nbsp;or<code>setLocation</code>&nbsp;method.</span>
</p>
<div class="callout callout--info">
  <p class="callout__title">
    <span class="wysiwyg-font-size-large"><strong>Minimum Countly SDK Version</strong></span>
  </p>
  <p>
    <span><code>setLocationInit</code></span> feature is only supported by the
    minimum SDK version 20.04.7.
  </p>
</div>
<p>
  <span>Recommended using&nbsp;<code>setLocationInit</code>&nbsp;method before initialization to sent location. This include:</span>
</p>
<ul>
  <li>
    <code><span>countryCode</span></code><span>&nbsp;</span>a string in ISO 3166-1
    alpha-2 format country code
  </li>
  <li>
    <code>city</code><span>&nbsp;</span>a string specifying city name
  </li>
  <li>
    <code>location</code><span>&nbsp;</span>a string comma separated latitude
    and longitude
  </li>
  <li>
    <code>IP</code><span>&nbsp;</span>a string specifying an IP address in IPv4
    or IPv6 format
  </li>
</ul>
<div>
  <pre><span>var</span><span> </span><span>countryCode</span><span> = </span><span>"us"</span><span>; <br></span><span>var</span><span> </span><span>city</span><span> = </span><span>"Houston"</span><span>; <br></span><span>var</span><span> </span><span>latitude</span><span> = </span><span>"29.634933"</span><span>; <br></span><span>var</span><span> </span><span>longitude</span><span> = </span><span>"-95.220255"</span><span>; <br></span><span>var</span><span> </span><span>ipAddress</span><span> = </span><span>"103.238.105.167"</span><span>; </span><br><br><span>Countly</span><span>.</span><span>setLocationInit</span><span>(</span><span>countryCode</span><span>, </span><span>city</span><span>, </span><span>latitude</span><span> + </span><span>","</span><span> + </span><span>longitude</span><span>, </span><span>ipAddress</span><span>);</span></pre>
</div>
<p>
  <span style="font-weight:400"><span>GeoLocation info recording methods may also be called at any time after the Countly SDK has started.<br>Use this&nbsp;<code>setLocation</code>&nbsp;method&nbsp;</span></span><span style="font-weight:400"></span>
</p>
<div>
  <pre><span>var</span><span> </span><span>countryCode</span><span> = </span><span>"us"</span><span>; <br></span><span>var</span><span> </span><span>city</span><span> = </span><span>"Houston"</span><span>; <br></span><span>var</span><span> </span><span>latitude</span><span> = </span><span>"29.634933"</span><span>; <br></span><span>var</span><span> </span><span>longitude</span><span> = </span><span>"-95.220255"</span><span>; <br></span><span>var</span><span> </span><span>ipAddress</span><span> = </span><span>"103.238.105.167"</span><span>; </span><br><br><span>Countly</span><span>.</span><span>setLocation</span><span>(</span><span>countryCode</span><span>, </span><span>city</span><span>, </span><span>latitude</span><span> + </span><span>","</span><span> + </span><span>longitude</span><span>, </span><span>ipAddress</span><span>);</span></pre>
</div>
<p>
  <span style="font-weight:400">The following will erase any cached location data from the device and stop further location tracking.</span>
</p>
<p>
  <span style="font-weight:400">If, after disabling location, the <code>setLocation</code></span><span style="font-weight:400">is called with any non-null value, tracking will resume.</span>
</p>
<pre><code class="javascript">//disable location tracking
Countly.disableLocation();</code></pre>
<h1>Custom events</h1>
<p>
  <span style="font-weight:400">You will find a quick summary on how to use custom events recording methods and what information they provide located below. For more information about how custom events and segmentations work,&nbsp;</span><a href="http://resources.count.ly/docs/custom-events"><span style="font-weight:400">review this guide</span></a><span style="font-weight:400">&nbsp;first.</span>
</p>
<p>
  <span style="font-weight:400">Note that all data passed to the Countly instance via the SDK or API should be in UTF-8.</span>
</p>
<pre><code class="javascript">// Example for sending basic custom event
var event = {"eventName":"basic_event","eventCount":1};
Countly.sendEvent(event);

// Example for event with sum
var event = {"eventName":"Event With Sum","eventCount":1,"eventSum":"0.99"};
Countly.sendEvent(event);

// Example for event with segment
var event = {"eventName":"Event With Segment","eventCount":1};
event.segments = {"Country" : "Germany", "Age" : "28"};
Countly.sendEvent(event);

// Example for event with segment and sum
var event = {"eventName":"Event With Sum And Segment","eventCount":1,"eventSum":"0.99"};
event.segments = {"Country" : "Germany", "Age" : "28"};
Countly.sendEvent(event);

// Timed events
// Basic timed event
Countly.startEvent("timedEvent");
Countly.endEvent("timedEvent");

// Timed event with a sum
Countly.startEvent("timedEvent");
var event = {
  "eventName": "timedEvent",
  "eventSum": "0.99"
};
Countly.endEvent(event);

// Timed event with segment
Countly.startEvent("timedEvent");
var event = {
  "eventName": "timedEvent"
};
event.segments = {
  "Country": "Germany",
  "Age": "28"
};
Countly.endEvent(event);

// Timed event with segment, sum and count
Countly.startEvent("timedEvent");
var event = {
  "eventName": "timedEvent",
  "eventCount": 1,
  "eventSum": "0.99"
};
event.segments = {
  "Country": "Germany",
  "Age": "28"
};
Countly.endEvent(event);
</code></pre>
<h1>User Profiles</h1>
<p>
  <span style="font-weight:400">If you have any details about the user/visitor, you may provide Countly with that information. This will allow you to track each specific user on the "User Profiles" tab, which is available with Countly’s Enterprise Edition.</span>
</p>
<p>
  <span style="font-weight:400">In order to set a user profile, use the code snippet below. After you send a user’s data, it may be viewed under Dashboard &gt; User Profiles.</span>
</p>
<pre><code class="javascript">// Example for setting user data
var options = {};
options.name = "Nicola Tesla";
options.username = "nicola";
options.email = "info@nicola.tesla";
options.organization = "Trust Electric Ltd";
options.phone = "+90 822 140 2546";
options.picture = "http://www.trust.electric/images/people/nicola.png";
options.picturePath = "";
options.gender = "M";
options.byear = 1919;
Countly.setUserData(options);</code></pre>
<p>
  <span style="font-weight:400">Countly also supports custom user properties where you can attach custom data for each user. In order to set or modify a user's data (e.g. increment, multiply, etc.), the following code sample may be used.</span>
</p>
<pre><code class="javascript">// examples for custom user properties
Countly.userData.setProperty("keyName", "keyValue"); //set custom property
Countly.userData.setOnce("keyName", 200); //set custom property only if property does not exist
Countly.userData.increment("keyName"); //increment value in key by one
Countly.userData.incrementBy("keyName", 10); //increment value in key by provided value
Countly.userData.multiply("keyName", 20); //multiply value in key by provided value
Countly.userData.saveMax("keyName", 100); //save max value between current and provided
Countly.userData.saveMin("keyName", 50); //save min value between current and provided
Countly.userData.setOnce("setOnce", 200);//insert value to array of unique values
Countly.userData.pushUniqueValue("type", "morning");//insert value to array of unique values
Countly.userData.pushValue("type", "morning");//insert value to array which can have duplicates
Countly.userData.pullValue("type", "morning");//remove value from array</code></pre>
<h1>Crash reporting</h1>
<p>
  <span style="font-weight:400">With this feature, the Countly SDK will generate a crash report if your application crashes due to an exception and send it to the Countly server for further inspection.</span>
</p>
<p>
  <span style="font-weight:400">If a crash report cannot be delivered to the server (e.g. no internet connection, unavailable server), then the SDK stores the crash report locally in order to try again at a later time.</span>
</p>
<p>
  <span style="font-weight:400">You will need to call the following method before calling init in order to activate automatic crash reporting.</span>
</p>
<pre><code class="javascript">// Using countly crash reports
Countly.enableCrashReporting();<br>Countly.init(...);</code></pre>
<p>
  <span style="font-weight:400">You may also add breadcrumb crash logs to your crash report using <code class="javascript">addCrashLog</code></span><span style="font-weight:400">&nbsp;and catch and send exceptions manually yourself using <code class="javascript">logException</code></span><span style="font-weight:400">. Please review the example code below:</span>
</p>
<pre><code class="javascript">Countly.addCrashLog("User Performed Step A");
setTimeout(() =&gt; { Countly.addCrashLog("User Performed Step B");}, 1000);
setTimeout(() =&gt; { Countly.addCrashLog("User Performed Step C");}, 1500);
setTimeout(() =&gt; {
   try {
     var a = {};
     var x = a.b.c; // this will throw an error.
   } catch (exc) {   
     var stack = exc.stack.toString();
     const customSegments = {"external_lib_version": "4.2.7", "theme": "dark"};
     const nonfatal = true;
     Countly.logException(stack, nonfatal, customSegments);
   }
},2000);
</code></pre>
<p>
  <span style="font-weight:400"><code class="javascript">logException</code>takes a string for the stack trace, a boolean flag indicating if the crash is considered fatal or not, and a segments dictionary to add additional data to your crash report.</span>
</p>
<h1>View tracking</h1>
<p>
  <span style="font-weight:400">You may manually add your own views in your application, and each view will be visible under <code>Analytics &gt; Views</code></span><span style="font-weight:400">. Below you may see two examples of sending a view using the <code>Countly.recordview</code></span><span style="font-weight:400">&nbsp;function.</span>
</p>
<pre><code class="javascript">// record a view on your application
Countly.recordView("My Home Page");
Countly.recordView("Profile Page");</code></pre>
<p>
  <span style="font-weight:400"><span>While tracking views, you may want to add custom segmentation to them.</span></span>
</p>
<pre><span style="font-weight:400"><span>// record view with segments<br>Countly.recordView("View with Segment", {"version": "1.0", "_facebook_version": "0.0.1"})</span></span></pre>
<h1>Application Performance Monitoring</h1>
<div class="callout callout--info">
  <p class="callout__title">
    <strong><span class="wysiwyg-font-size-large">Minimum Countly SDK Version</span></strong>
  </p>
  <p>
    This feature is only supported by the minimum SDK version 20.04.7.
  </p>
</div>
<p>
  Performance Monitoring feature allows you to analyze your application's performance
  on various aspects. For more details please see
  <a href="https://support.count.ly/hc/en-us/articles/900000819806-Performance-monitoring" target="_self">Performance Monitoring documentation</a>.
</p>
<p>
  Here is how you can utilize Performance Monitoring feature in your apps:
</p>
<p>First, you need to enable Performance Monitoring feature::</p>
<pre>Countly.<span>enableApm</span>(); <span>// Enable APM features.</span></pre>
<p>
  With this, Countly SDK will start measuring some performance traces automatically.
  Those include app foreground time, app background time. Additionally, custom
  traces and network traces can be manually recorded.
</p>
<h2>Custom trace</h2>
<p>
  <span><span class="Apple-converted-space">You may also measure any operation you want and record it using custom traces. First, you need to start a trace by using the <code class="objectivec">startTrace(traceKey)</code> method:</span></span>
</p>
<pre>Countly.<span>startTrace</span>(traceKey);</pre>
<p>
  Then you may end it using the
  <span><span class="Apple-converted-space"><code class="objectivec">endTrace(traceKey, customMetric)</code>method, optionally passing any metrics as key-value pairs:</span></span>
</p>
<pre>String traceKey = <span>"Trace Key"</span>;<br>Map&lt;String, int&gt; customMetric = {<br>  <span>"ABC"</span>: <span>1233</span>,<br>  <span>"C44C"</span>: <span>1337<br></span>};<br>Countly.<span>endTrace</span>(traceKey, customMetric);</pre>
<p>
  The duration of the custom trace will be automatically calculated on ending.&nbsp;Trace
  names should be non-zero length valid strings.&nbsp;Trying to start a custom
  trace with the already started name will have no effect.&nbsp;Trying to end a
  custom trace with already ended (or not yet started) name will have no effect.
</p>
<p>
  You may also cancel any custom trace you started, using&nbsp;<span><span class="Apple-converted-space"><code class="objectivec">cancelTrace(traceKey)</code>method:</span></span>
</p>
<pre>Countly.cancelTrace(traceKey);</pre>
<p>
  Additionally, if you need you may cancel all custom traces you started, using
  <span><span class="Apple-converted-space"><code class="objectivec">clearAllTraces()</code>method:</span></span>
</p>
<pre>Countly.clearAllTraces(traceKey);</pre>
<h2>Network trace</h2>
<p>
  You may record manual network traces using the<code><span>recordNetworkTrace(networkTraceKey, responseCode, requestPayloadSize, responsePayloadSize, startTime, endTime)</span></code>&nbsp;method.
</p>
<p>
  A network trace is a collection of measured information about a network request.<br>
  When a network request is completed, a network trace can be recorded manually
  to be analyzed in the Performance Monitoring feature later with the following
  parameters:&nbsp;
</p>
<p>
  - <code>networkTraceKey</code>: A non-zero length valid string<br>
  - <code>responseCode</code>: HTTP status code of the received response<br>
  - <code>requestPayloadSize</code>: Size of the request's payload in bytes<br>
  - <code>responsePayloadSize</code>: Size of the received response's payload in
  bytes<br>
  - <code>startTime</code>: UNIX time stamp in milliseconds for the starting time
  of the request<br>
  - <code>endTime</code>: UNIX time stamp in milliseconds for the ending time of
  the request
</p>
<pre>Countly.<span>recordNetworkTrace</span>(networkTraceKey, responseCode, requestPayloadSize, responsePayloadSize, startTime, endTime);</pre>
<h1>Remote Config</h1>
<p>
  <span style="font-weight:400"> Remote config allows you to modify how your app functions or looks by requesting key-value pairs from your Countly server. The returned values may be modified based on the user profile. For more details, please review this&nbsp;</span><a href="https://resources.count.ly/docs/remote-config"> <span style="font-weight:400">Remote Config documentation</span></a><span style="font-weight:400">. </span>
</p>
<pre><code class="javascript">// remoteConfigUpdate will update all remote config values
Countly.remoteConfigUpdate(function(data){ 
	console.log(data);
});

// updateRemoteConfigForKeysOnly will update only those values which keyname are pass in array
Countly.updateRemoteConfigForKeysOnly(["test1"],function(data){
	console.log(data);
});

// updateRemoteConfigExceptKeys will update only values except which keyname are pass in array
Countly.updateRemoteConfigExceptKeys(["test1"],function(data){
	console.log(data);
});
      
// getRemoteConfigValueForKey will fetch remote config values for keyname sent
Countly.getRemoteConfigValueForKey("test1",function(data){
	console.log(data);
});</code></pre>
<h1>Clearing Stored Remote Config values</h1>
<p>
  <span style="font-weight:400">At some point, you might want to erase all the values downloaded from the server. To do so, you will need to call the following function:</span>
</p>
<pre><code class="javascript">Countly.remoteConfigClearValues();
</code></pre>
<h1>User Consent management</h1>
<p>
  <span style="font-weight:400">In an effort to be compliant with GDPR and other data privacy regulations, Countly provides ways to toggle different Countly tracking features on/off depending on a user's given consent. To learn more about how Countly manages this issue and what capabilities we provide to our customers, please visit our guide on the&nbsp;</span><a href="https://resources.count.ly/docs/compliance-hub"><span style="font-weight:400">Compliance Hub plugin</span></a><span style="font-weight:400">. You may also find more information about how Countly helps organizations with GDPR regulations&nbsp;</span><a href="https://blog.count.ly/countly-the-gdpr-how-worlds-leading-mobile-and-web-analytics-platform-can-help-organizations-5015042fab27"><span style="font-weight:400">in this Countly blog post</span></a><span style="font-weight:400">.<br></span>
</p>
<p>
  <span>Currently, available features with consent control are as follows</span>:
</p>
<ul>
  <li>
    sessions - tracking when, how often and how long users use your app
  </li>
  <li>events - allow sending custom events to the server</li>
  <li>views - allow tracking which views user visits</li>
  <li>location - allow sending location information</li>
  <li>crashes - allow tracking crashes, exceptions and errors</li>
  <li>
    attribution - allow tracking from which campaign did user come
  </li>
  <li>
    users - allow collecting/providing user information, including custom properties
  </li>
  <li>push - allow push notifications</li>
  <li>star-rating - allow sending their rating and feedback</li>
  <li>apm - allow application performance monitoring</li>
</ul>
<p>
  <span style="font-weight:400">Since the React Native Bridge SDK employs our IOS and Android SDKs, you may also be interested in reviewing their relevant documentation on this topic (</span><a href="https://resources.count.ly/docs/countly-sdk-for-ios-and-os-x#section-consents"><span style="font-weight:400">here</span></a><span style="font-weight:400">&nbsp;and&nbsp;</span><a href="https://resources.count.ly/docs/countly-sdk-for-android#section-user-consent-management"><span style="font-weight:400">here,&nbsp;</span></a><span style="font-weight:400">respectively).</span>
</p>
<p>
  <span style="font-weight:400">Next we will go over the methods that are available in this SDK.</span>
</p>
<table>
  <tbody>
    <tr>
      <th>Method</th>
      <th>Parameters / Examples</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>
        <code>setRequiresConsent</code>
      </td>
      <td>boolean</td>
      <td>
        <p>
          <span style="font-weight:400">The requirement for checking consent is disabled by default. To enable it, you will have to call <code>setRequiresConsent</code></span><span style="font-weight:400">with <code>true</code></span><span style="font-weight:400">before initializing Countly. You may also pass a consent flag as true/false when you call&nbsp;the <code>Countly.init</code></span><span style="font-weight:400">.</span>
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <code>giveConsentInit</code>
      </td>
      <td>string array of strings</td>
      <td>
        <p>
          <span style="font-weight:400">To add consent for a single feature (string parameter) or a subset of features (array of strings parameter). Use this method for giving consent before&nbsp;</span><span style="font-weight:400">initializing.<br><br><strong>This feature is only supported by the minimum SDK version 20.04.7.</strong><br></span>
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <code>giveConsent</code>
      </td>
      <td>string array of strings</td>
      <td>
        <p>
          <span style="font-weight:400">To add consent for a single feature (string parameter) or a subset of features (array of strings parameter). Use this method if want to give consent after&nbsp;</span><span style="font-weight:400">initializing.</span>&nbsp;
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <code>removeConsent</code>
      </td>
      <td>string array of strings</td>
      <td>
        <p>
          <span style="font-weight:400">To remove consent for a single feature (string parameter) or a subset of features (array of strings parameter).</span>
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <code>giveAllConsent</code>
      </td>
      <td>none</td>
      <td>To give consent for all available features.</td>
    </tr>
    <tr>
      <td>
        <code>removeAllConsent</code>
      </td>
      <td>none</td>
      <td>To remove consent for all available features.</td>
    </tr>
  </tbody>
</table>
<pre><code class="javascript">// Usage examples

Countly.setRequiresConsent(true);

// for a single feature
Countly.giveConsentInit("events");
Countly.giveConsent("events");
Countly.removeConsent("events");

// for a subset of features
Countly.giveConsentInit(["events", "views", "star-rating", "crashes"]);
Countly.giveConsent(["events", "views", "star-rating", "crashes"]);
Countly.removeConsent(["events", "views", "star-rating", "crashes"]);

// for all available features
Countly.giveAllConsent();
Countly.removeAllConsent();</code></pre>
<p>
  <span style="font-weight:400">The string values corresponding to the features that will be used in the <code>giveConsent</code> or <code>removeConsent</code></span><span style="font-weight:400">methods may be found&nbsp;</span><a href="https://resources.count.ly/docs/sdk-development-guide#section-exposing-available-features-for-consent"><span style="font-weight:400">here</span></a><span style="font-weight:400">. In addition, please review our platform SDK documents if the feature is applicable or not for that platform.</span>
</p>
<h1>Device ID</h1>
<p>
  <span style="font-weight:400"><span>When the SDK is initialized for the first time and no device ID is provided, a device ID will be generated by SDK.</span></span><span style="font-weight:400"><span></span></span>
</p>
<p>
  <span style="font-weight:400"><span>For iOS: the device ID generated by SDK is the Identifier For Vendor (IDFV)<br>For Android:&nbsp; the device ID generated by SDK is the OpenUDID or Google Advertising ID</span></span>
</p>
<p>
  <span style="font-weight:400"><span>You may provide your own custom device ID when</span> initializing the SDK</span>
</p>
<pre>Countly.<span>init</span>(<span>SERVER_URL</span>, <span>APP_KEY, DEVICE_ID</span>)</pre>
<h2>
  Changing the Device ID<span style="font-weight:400"></span>
</h2>
<p>
  <span style="font-weight:400">You may configure/change the device ID anytime using:<br></span>
</p>
<pre>Countly.<span>changeDeviceId</span>(DEVICE_ID, <span>ON_SERVER</span>);</pre>
<p>
  <span>You may either allow the device to be counted as a new device or merge existing data on the server. </span>If
  the<code>onServer</code><span>&nbsp;</span>bool is set to <code>true</code>,
  <span>the old device ID on the server will be replaced with the new one, and data associated with the old device ID will be merged automatically.<br>Otherwise, if&nbsp;<code>onServer</code> bool is&nbsp;set to <code>false</code>, the device will be counted as a new device on the server.<br></span>
</p>
<h2 id="temporary-device-id" class="anchor-heading">Temporary Device ID</h2>
<p>
  You may use a temporary device ID mode for keeping all requests on hold until
  the real device ID is set later.&nbsp;
</p>
<p>
  You can enable temporary device ID
  <span style="font-weight:400">when initializing the SDK:</span>
</p>
<pre>Countly.<span>init</span>(<span>SERVER_URL</span>, <span>APP_KEY, "TemporaryDeviceID"</span>)</pre>
<p>To enable a temporary device ID after init, you would call:</p>
<pre>Countly.<span>changeDeviceId</span>("TemporaryDeviceID", <span>ON_SERVER</span>);</pre>
<p>
  &nbsp;<strong>Note:</strong>&nbsp;When passing<span> </span><code>TemporaryDeviceID</code><span>&nbsp;</span>for<span>&nbsp;</span><code>deviceID</code><span>&nbsp;</span>parameter,
  argument for<span>&nbsp;</span><code>onServer</code>parameter does not matter.
</p>
<p>
  As long as the device ID value is<span> </span><code>TemporaryDeviceID</code>,
  the SDK will be in temporary device ID mode and all requests will be on hold,
  but they will be persistently stored.
</p>
<p>
  When in temporary device ID mode, method calls for presenting feedback widgets
  and updating remote config will be ignored.
</p>
<p>
  Later, when the real device ID is set using<span> </span><code>Countly.<span>changeDeviceId</span>(DEVICE_ID, <span>ON_SERVER</span>);</code><span>&nbsp;</span>method,
  all requests which have been kept on hold until that point will start with the
  real device ID
</p>
<h1>Enabling/disabling logging</h1>
<p>
  <span style="font-weight:400">If logging is enabled, our SDK will then print out debug messages regarding its internal state and problems encountered. Logging is disabled by default. Enabling it during development is also advised. Enabling it before init is recommended so you may see the initialization process logs.</span>
</p>
<pre><code class="javascript">Countly.enableLogging();<br> Countly.init(...);
 ...<br> // to disable it again later 
 Countly.disableLogging();


</code></pre>
<h1>Forcing HTTP POST</h1>
<p>
  <span style="font-weight:400">If the data sent to the server is short enough, the SDK will use HTTP GET requests. In the event you would like an override so that HTTP POST may be used in all cases, call the "setHttpPostForced" function after you have called "init". You may use the same function later in the app’s life cycle to disable the override. This function has to be called every time the app starts.</span>
</p>
<pre><code class="javascript">  
// enabling the override
Countly.setHttpPostForced(true);
  
// disabling the override
Countly.setHttpPostForced(false);</code></pre>
<h1>Checking if init has been called</h1>
<p>
  <span style="font-weight:400">You may use the following function in the event you would like to check if init has been called:</span>
</p>
<pre><code class="javascript">Countly.isInitialized().then(result =&gt; console.log(result)); // true or false
</code></pre>
<h1>Checking if onStart has been called</h1>
<p>
  <span style="font-weight:400">For some Android applications there might be a use case where the developer would like to check if the Countly SDK onStart function has been called. To do so, they may use the following call:</span>
</p>
<pre><code class="javascript">Countly.hasBeenCalledOnStart().then(result =&gt; console.log(result)); // true or false </code></pre>
<h1>Rich Push Notifications</h1>
<p>
  <span style="font-weight:400">Please first check our&nbsp;</span><a href="https://resources.count.ly/docs/countly-push-guide"><span style="font-weight:400">Push Notifications Guide</span></a><span style="font-weight:400">&nbsp;to see how you can use this feature. Since Android and IOS handles notifications differently (from how you can send them externally to how they are handled in native code), we need to provide different instructions for these two platforms.</span>
</p>
<h1>Android Setup and Usage of Push Notifications</h1>
<p>
  The following setup code is required starting from version 20.4.5.&nbsp;
</p>
<ol>
  <li>
    First thing you need to do is a FCM id and a&nbsp;google-services.json file.
    You would input that FCM id into your apps configuration in your countly
    dashboard. You also need to copy your google-services.json file to your android
    apps directory, which most likely is in "./android/app".
  </li>
  <li>
    You need to add firebase dependencies to your android apps gradle file, which
    most likely is located in "./android/app/build.gradle", so start by opening
    that file.
  </li>
  <li>
    Inside the dependency section add&nbsp; the "firebase-messaging" dependency
    with a call similar to "implementation 'com.google.firebase:firebase-messaging:20.1.7'"
  </li>
  <li>
    At the bottom of your gradle file add this line "apply plugin: 'com.google.gms.google-services'"
  </li>
  <li>
    Open you android projects gradle file, which most likely is located in "./android/build.gradle"
  </li>
  <li>
    Add the following call in the dependency section "classpath 'com.google.gms:google-services:3.2.0'"
  </li>
</ol>
<h1>JS Push Method Implementation</h1>
<p>
  <span>First, when setting up push for the React Native SDK, you would first select the push token mode. This would allow you to choose either test or production modes, </span>push
  token mode should be set before init.
</p>
<pre>// Important call this method before init method<br>Countly.pushTokenType(Countly.messagingMode.DEVELOPMENT, "Channel Name", "Channel Description");<br>// Countly.messagingMode.DEVELOPMENT<br>// Countly.messagingMode.PRODUCTION<br>// Countly.messagingMode.ADHOC</pre>
<p>
  <span>When you are finally ready to initialise Countly push, you would call Countly.askForNotificationPermission(), this function should be call after init.</span>
</p>
<pre>// Call this method any time.<br>Countly.askForNotificationPermission();<br>// This method will ask for permission, <br>// and send push token to countly server.</pre>
<p>
  React Native JS code to receive notification data. Call anywhere or event before
  init.
</p>
<pre>Countly.registerForNotification(function(theNotification){<br>console.log(JSON.stringify(theNotification));<br>});</pre>
<h1>iOS Push Notification Documentation</h1>
<p class="has-line-data" data-line-start="2" data-line-end="3">
  Note: This documentation assumes, that you have created the necessary certificate
  and you have proper app bundle id.
</p>
<p class="has-line-data" data-line-start="4" data-line-end="5">
  STEP 1: Make sure you have proper app bundle id and team selected.
</p>
<p class="has-line-data" data-line-start="6" data-line-end="12">
  STEP 2: Add Capabilities<br>
  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1. Push Notification<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2. Background
  Mode - Remote Notifications<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Go into
  your AwesomeProject/ios dir and open AwesomeProject.xcworkspace workspace. &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  Select the top project “AwesomeProject” and select the “Signing &amp; Capabilities”
  tab. Add 2 new Capabilities using “+” button:<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Background
  Mode capability and tick Remote Notifications.<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Push
  Notifications capability
</p>
<h1>
  <img src="/hc/article_attachments/900001150986/Screenshot_2020-05-05_at_1.43.11_PM.png" alt="Screenshot_2020-05-05_at_1.43.11_PM.png">
</h1>
<p class="has-line-data" data-line-start="13" data-line-end="14">
  <img src="/hc/article_attachments/900001151086/Screenshot_2020-05-05_at_1.43.21_PM.png" alt="Screenshot_2020-05-05_at_1.43.21_PM.png">
</p>
<p class="has-line-data" data-line-start="13" data-line-end="14">
  <img src="/hc/article_attachments/900001153423/Screenshot_2020-05-05_at_1.43.36_PM.png" alt="Screenshot_2020-05-05_at_1.43.36_PM.png">
</p>
<p class="has-line-data" data-line-start="13" data-line-end="14">
  <img src="/hc/article_attachments/900001151106/Screenshot_2020-05-05_at_1.43.49_PM.png" alt="Screenshot_2020-05-05_at_1.43.49_PM.png">
</p>
<p>STEP 3: Place below code in there respective files.</p>
<p>### AppDelegate.m</p>
<p>
  Add header file<br>
  `#import "CountlyReactNative.h"`<br>
  `#import &lt;UserNotifications/UserNotifications.h&gt;`
</p>
<p>
  <br>
  Before `@end` add these methods:
</p>
<pre>  -(void)userNotificationCenter:(UNUserNotificationCenter *)center didReceiveNotificationResponse:(UNNotificationResponse
  *)response withCompletionHandler:(void (^)(void))completionHandler{<br>
  &nbsp;&nbsp; NSLog(@"didReceiveNotificationResponse");<br>
  &nbsp;&nbsp; NSDictionary *notification = response.notification.request.content.userInfo;<br>
  &nbsp;&nbsp; [CountlyReactNative onNotification: notification];<br>
  &nbsp;&nbsp; completionHandler();<br>
  }
  
  //Called when a notification is delivered to a foreground app.<br>
  -(void)userNotificationCenter:(UNUserNotificationCenter *)center willPresentNotification:(UNNotification
  *)notification withCompletionHandler:(void (^)(UNNotificationPresentationOptions
  options))completionHandler<br>
  {<br>
  &nbsp;&nbsp;&nbsp; NSLog(@"didReceiveNotificationResponse");<br>
  &nbsp;&nbsp; NSDictionary *userInfo = notification.request.content.userInfo;<br>
  &nbsp;&nbsp; [CountlyReactNative onNotification: userInfo];<br>
  &nbsp;&nbsp; completionHandler(UNAuthorizationOptionSound | UNAuthorizationOptionAlert
  | UNAuthorizationOptionBadge);<br>
  }
</pre>
<h1>Rich Push Notification</h1>
<p class="has-line-data" data-line-start="61" data-line-end="71">
  STEP 1: Creating Notification Service Extension<br>
  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Editor -&gt; Add Target -&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Make
  sure <code>ios</code> is selected<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Make
  sure <code>Notification Service Extension</code> is selected<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Click
  <code>Next</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Enter
  Product Name e.g. <code>CountlyNSE</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Language
  <code>Objective-C</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Click
  <code>Finish</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; It will
  ask for a modal / popup <code>Activate “CountlyNSE” scheme?</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Choose
  <code>Cancel</code>
</p>
<p class="has-line-data" data-line-start="72" data-line-end="81">
  <img src="/hc/article_attachments/900001153503/b0b0f12-f62249f-screen-1.png" alt="b0b0f12-f62249f-screen-1.png">
</p>
<p class="has-line-data" data-line-start="72" data-line-end="81">
  <img src="/hc/article_attachments/900001153523/04c2353-17d2fec-screen-2.png" alt="04c2353-17d2fec-screen-2.png">
</p>
<p class="has-line-data" data-line-start="72" data-line-end="81">
  STEP 2: Adding Compile Source<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  Under <code>TARGETS</code> select <code>CountlyNSE</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Select
  <code>Build Phases</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Expand
  <code>Compile Sources</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Drag
  and Drop <code>CountlyNotificationService.h</code> and
  <code>CountlyNotificationService.m</code> file<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Note:
  Make sure you have checked "Copy if necessary"<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Note:
  You may also find this file in <code>Xcode</code> under
  <code>Pods(Project) -&gt; Pods(Folder) -&gt; Countly</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Note:
  You may also find this file in <code>Finder</code> under
  <code>AwesomeProject/ios/Pods/Countly</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Note:
  You may also find this file in <code>Xcode</code> under
  <code>AwesomeProject(Project) -&gt; Libraries(Folder) -&gt; countly-sdk-react-native-bridge(Project)-&gt;src(Folder)</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Note:
  You may also find this file in <code>Finder</code> under
  <code>node_modules/countly-sdk-react-native-bridge/ios/Pods/Countly</code>
</p>
<p class="has-line-data" data-line-start="82" data-line-end="86">
  <img src="/hc/article_attachments/900001153563/Screenshot_2020-05-05_at_1.44.05_PM.png" alt="Screenshot_2020-05-05_at_1.44.05_PM.png">
</p>
<p class="has-line-data" data-line-start="82" data-line-end="86">&nbsp;</p>
<p class="has-line-data" data-line-start="82" data-line-end="86">
  STEP 3: Updating NotificationService file<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  Under
  <code>AwesomeProject(Project) -&gt; CountlyNSE(Folder) -&gt; NotificationService.m</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Add
  import header <code>#import "CountlyNotificationService.h"</code><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Add
  the following line at the end of
  <code>didReceiveNotificationRequest:withContentHandler:</code>
</p>
<pre><code>    - (void)didReceiveNotificationRequest:(UNNotificationRequest *)request withContentHandler:(void (^)(UNNotificationContent * _Nonnull))contentHandler
    {
        self.contentHandler = contentHandler;
        self.bestAttemptContent = [request.content mutableCopy];    
        //delete existing template code, and add this line
        [CountlyNotificationService didReceiveNotificationRequest:request withContentHandler:contentHandler];
    }
    

    Note: Please make sure you configure App Transport Security setting in extension's Info.plist file also, just like the main application. Otherwise media attachments from non-https sources can not be loaded.
    
    Note: Please make sure you check Deployment Target version of extension target is 10, not 10.3 (or whatever minor version Xcode set automatically). Otherwise users running iOS versions lower than Deployment Target value can not get rich push notifications.

    Note: To send push messages to applications that are Debug build use Countly.messagingMode.DEVELOPMENT, for App Store built ones use Countly.messagingMode.PRODUCTION, and for TestFlight/Ad Hoc builds use Countly.messagingMode.ADHOC.    </code></pre>
<h1>Attribution analytics &amp; install campaigns&nbsp;</h1>
<div class="callout callout--info">
  <p class="callout__title">
    <strong><span class="wysiwyg-font-size-large">Minimum Countly SDK Version</span></strong>
  </p>
  <p>
    This feature is only supported by the minimum SDK version 20.04.6.
  </p>
</div>
<p>
  <a href="https://count.ly/attribution-analytics">Countly Attribution Analytics</a>
  allows you to measure your marketing campaign performance by attributing installs
  from specific campaigns. This feature is available for the Enterprise Edition.
</p>
<p>Call this before init.</p>
<pre><span>// Enable to measure your marketing campaign performance by attributing installs from specific campaigns.</span><br>Countly.<span>enableAttribution</span>();</pre>
<div class="callout callout--info">
  <p class="callout__title">
    <strong><span class="wysiwyg-font-size-large">Minimum Countly SDK Version</span></strong>
  </p>
  <p>
    This feature is only supported by the minimum SDK version 20.04.8.
  </p>
</div>
<p>
  <span>From version 20.04.8+ for iOS use <code><span style="font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif">Countly</span><span style="font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif">.</span><span style="font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif">recordAttributionID("IDFA")</span></code></span><span style="font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif"> function instead of <span><code>Countly.enableAttribution()</code></span></span>
</p>
<p>
  <span>You can use <code><span style="font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif">Countly</span><span style="font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif">.</span><span style="font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif">recordAttributionID</span></code> function to specify IDFA for campaign attribution</span>
</p>
<pre><span><span style="font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif">Countly</span><span style="font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif">.</span><span style="font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif">recordAttributionID("</span>IDFA_VALUE_YOU_GET_FROM_THE_SYSTEM");</span><span></span></pre>
<p>
  <span>For iOS 14+ apple changes regarding Application tracking, you need to ask the user for permission to track Application.</span><span></span>
</p>
<p>
  <span>For IDFA you can use this plugin, this plugin also supports iOS 14+ changes for Application tracking permission:<br></span><span><a href="https://github.com/ijunaid/react-native-advertising-id.git">https://github.com/ijunaid/react-native-advertising-id.git</a></span>
</p>
<p>
  <span>Here is how to use this plugin with Countly attribution feature:</span>
</p>
<div>
  <pre>npm install --save <a href="https://github.com/ijunaid/react-native-advertising-id.git">https://github.com/ijunaid/react-native-advertising-id.git</a><br><br>cd ./ios<br>pod install<br><br><strong>NSUserTrackingUsageDescription</strong><br>Add "Privacy - Tracking Usage Description" in your ios info.plist file.<br><br><strong>#Example Code for Countly attribution feature to support iOS 14+.</strong><br><br>import RNAdvertisingId from 'react-native-advertising-id';<br><br>if (Platform.OS.match("ios")) {<br>RNAdvertisingId.getAdvertisingId()<br>.then(response =&gt; {<br>Countly.recordAttributionID(response.advertisingId);<br>})<br>.catch(error =&gt; console.error(error));<br>}<br>else {<br>Countly.enableAttribution(); // Enable to measure your marketing campaign performance by attributing installs from specific campaigns.<br>}</pre>
</div>
<h1>Getting user feedback</h1>
<p>
  <span style="font-weight:400">There are two ways of getting feedback from your users: Star-rating dialog and the feedback widget.</span>
</p>
<p>
  <span style="font-weight:400">Star-rating dialog allows users to give feedback as a rating from 1 through 5. The feedback widget allows you to receive the same 1 through 5 rating and also a text comment.</span>
</p>
<h2>
  <strong>Feedback widget</strong>
</h2>
<p>
  <span style="font-weight:400">The feedback widget displays a server configured widget to your user devices.</span>
</p>
<div class="img-container">
  <img src="https://count.ly/images/guide/ea55d24-072bb00-t1.png">
</div>
<p>
  <span style="font-weight:400">It's possible to configure any of the shown text fields and replace them with a custom string of your choice.</span>
</p>
<p>
  <span style="font-weight:400">In addition to a 1 through 5 rating, it is possible for users to leave a text comment and an email, should the user like to be contacted by the app developer.</span>
</p>
<p>
  <span style="font-weight:400">Trying to show the rating widget is a single call, &nbsp;however, there is a two-set process underneath. Before it is shown, the SDK tries to contact the server to get more information about the dialog. Therefore, a network connection to it is needed.</span>
</p>
<p>
  <span style="font-weight:400">You may try to display the widget after you have initialized the SDK. To do so, you will first need to get the widget ID from your server:</span>
</p>
<div class="img-container">
  <img src="https://count.ly/images/guide/f773cf4-2dd58c6-t2.png">
</div>
<p>
  <span style="font-weight:400">You may call the function to show the widget popup using the widget ID:</span>
</p>
<pre><code class="javascript">Countly.showFeedbackPopup("WidgetId", "Button Text");</code></pre>
<h1>Star-rating dialog</h1>
<p>
  <span style="font-weight:400">Star-rating integration provides a dialog for getting users’ feedback about the application. It contains a title, a simple message explaining its purpose, a 1 through 5-star meter for getting users rating, and a dismiss button in case the user does not want to give a rating.</span>
</p>
<p>
  <span style="font-weight:400">This star rating has nothing to do with Google Play Store ratings and reviews. It is simply for getting a brief feedback from your users to be displayed on the Countly dashboard. If the user dismisses the star-rating dialog without giving a rating, the event will not be recorded.</span>
</p>
<pre><code class="javascript">Countly.showStarRating();</code></pre>
<h1>Native C++ Crash Reporting</h1>
<p>
  <span style="font-weight:400">If you have some C++ libraries in your Android app, the React Native Bridge SDK allows you to record possible crashes in your Countly server by integrating the <code>sdk-native</code></span><span style="font-weight:400">developed within our&nbsp;</span><a href="https://github.com/Countly/countly-sdk-android"><span style="font-weight:400">Android SDK</span></a><span style="font-weight:400">. You may receive more information on how this works </span><a href="https://resources.count.ly/docs/countly-sdk-for-android#section-native-c-crash-reporting"><span style="font-weight:400">here</span></a><span style="font-weight:400">.</span>
</p>
<p>
  <span style="font-weight:400">As this feature is optional, you will need to uncomment some parts in our SDK files in order to make it available. First, go to <code>android/build.gradle</code></span><span style="font-weight:400">and add the package dependency (all file paths in this section are given relative to the <code>countly-sdk-react-native-bridge</code></span><span style="font-weight:400">which was <code>npm</code></span><span style="font-weight:400">installed above):</span>
</p>
<pre><code class="shell">dependencies {
    implementation 'ly.count.android:sdk-native:19.02.3'    
}</code></pre>
<p>
  <span style="font-weight:400">Next, uncomment the following in the <code>android/src/main/java/ly/count/android/sdk/react/CountlyReactNative.java</code></span><span style="font-weight:400">file:</span>
</p>
<pre><code class="java">import ly.count.android.sdknative.CountlyNative;
    
@ReactMethod
  public void initNative(){
  CountlyNative.initNative(getReactApplicationContext());
}
	
@ReactMethod
  public void testCrash(){
  CountlyNative.crash();
}
    </code></pre>
<p>
  <span style="font-weight:400">Now modify <code>Countly.js</code></span><span style="font-weight:400">to connect from JS to these new methods:</span>
</p>
<pre><code class="javascript">Countly.initNative = function(){
    CountlyReactNative.initNative();
}

Countly.testCrash = function(){
    CountlyReactNative.testCrash();
}</code></pre>
<p>
  <span style="font-weight:400">If you are using our sample app in <code>example/App.js</code></span><span style="font-weight:400">,</span><span style="font-weight:400">&nbsp;you may also uncomment the following parts in it for easy testing:</span>
</p>
<pre><code class="javascript">initNative(){
  Countly.initNative();
};

testCrash(){
  Countly.testCrash();
}

// ...

            &lt; Button onPress = { this.initNative } title = "Init Native" color = "#00b5ad"&gt; 
            &lt; Button onPress = { this.testCrash } title = "Test Native Crash" color = "crimson"&gt; 

</code></pre>
<p>
  <span style="font-weight:400">We suggest calling <code>Countly.initNative()</code></span><span style="font-weight:400">;</span><span style="font-weight:400">&nbsp;as soon as your app is initialized to be able to catch setup time crashes. Sending crash dump files to the server will be taken care of by the Android SDK during the next app initialization. We also provide a gradle plugin which automatically uploads symbol files to your server (these are needed for the symbolication of crash dumps). You may integrate it to your React Native project as explained in the relevant Android documentation&nbsp;</span><a href="https://resources.count.ly/docs/countly-sdk-for-android#section-native-c-crash-reporting"><span style="font-weight:400">page</span></a><span style="font-weight:400">.</span>
</p>
<p>
  <span style="font-weight:400">This is what the debug logs will look like if you are going to use this feature:</span>
</p>
<pre><code class="text">$ adb logcat -s Countly:V countly_breakpad_cpp:V

# when Countly.initNative() is called 

D/countly_breakpad_cpp(123): breakpad initialize succeeded. dump files will be saved at /Countly/CrashDumps

# when a crash occurs (you may trigger one by Countly.testCrash())

D/countly_breakpad_cpp(123): DumpCallback started
D/countly_breakpad_cpp(123): DumpCallback ==&gt; succeeded path=/Countly/CrashDumps/30f6d9b8-b3b2-1553-2efe0ba2-36588990.dmp

# when app is run again after the crash 

D/Countly (124): Initializing...
D/Countly (124): Checking for native crash dumps
D/Countly (124): Native crash folder exists, checking for dumps
D/Countly (124): Crash dump folder contains [1] files
D/Countly (124): Recording native crash dump: [30f6d9b8-b3b2-1553-2efe0ba2-36588990.dmp]</code></pre>
<h3>Pinned Certificate (Call this method before init)</h3>
<h4>Terminal</h4>
<pre>openssl s_client -connect try.count.ly:443 -showcerts</pre>
<p>
  Run the above command and copy the content inside begin certificate and end certificate.
</p>
<p>
  Example files are here:<br>
  <a href="https://github.com/Countly/countly-sdk-react-native-bridge/blob/dev-nicolson/example/android.count.ly.cer">https://github.com/Countly/countly-sdk-react-native-bridge/blob/master/example/android.count.ly.cer</a><br>
  <a href="https://github.com/Countly/countly-sdk-react-native-bridge/blob/dev-nicolson/example/ios.count.ly.cer">https://github.com/Countly/countly-sdk-react-native-bridge/blob/master/example/ios.count.ly.cer</a>
</p>
<p>
  Both files are different, android only needs the cert string, iOS needs the entire
  .cer file.
</p>
<h4>Android</h4>
<pre>cd AwesomeProject<br>ls<br>count.ly.cer<br>mkdir -p ./android/app/src/main/assets/<br>cp ./count.ly.cer ./android/app/src/main/assets/</pre>
<h4>iOS</h4>
<pre>open ./ios/AwesomeProject.xcworkspace<br>Right click on AwesomeProject and select `New Group` (ScreenShot 1)<br>Name it `Resources`<br>Drag and Drop count.ly.cer file under that folder (ScreenShot 2)<br>Make sure copy bundle resources has your certificate (Screenshot 4).</pre>
<pre><br><img src="/hc/article_attachments/900002229303/Screenshot_2020-07-07_at_11.39.02_AM.png" alt="Screenshot_2020-07-07_at_11.39.02_AM.png"><br><img src="/hc/article_attachments/900001515963/ScreenShot_Pinned_Certificate_1.png" alt="ScreenShot_Pinned_Certificate_1.png"></pre>
<p>
  <img src="/hc/article_attachments/900001515983/Screenshot_Pinned_Certificate_2.png" alt="Screenshot_Pinned_Certificate_2.png">
</p>
<pre><img src="/hc/article_attachments/900002229363/Screenshot_2020-07-07_at_11.39.40_AM.png" alt="Screenshot_2020-07-07_at_11.39.40_AM.png"></pre>
<h4>JS</h4>
<pre>Countly.pinnedCertificates("count.ly.cer");</pre>
<p>
  Note: "count.ly.cer" is the name of the file. Replace this file with the one
  you have.
</p>